<!doctype html>
<html data-n-head-ssr lang="en" data-n-head="lang">
  <head>
    <title>Membuat AMP Pages dengan Nuxt.js</title><meta data-n-head="ssr" charset="utf-8"><meta data-n-head="ssr" name="viewport" content="width=device-width,initial-scale=1"><meta data-n-head="ssr" name="author" content="Irfan Maulana - @mazipan"><meta data-n-head="ssr" data-hid="robots" name="robots" content="index,follow"><meta data-n-head="ssr" data-hid="keywords" name="keywords" content="mazipan, mazipanneh, irfan maulana, irfan vue, irfan blibli, irfan bizzy, irfan tokopedia"><meta data-n-head="ssr" name="theme-color" content="#bd93f9"><meta data-n-head="ssr" name="mobile-web-app-capable" content="yes"><meta data-n-head="ssr" data-hid="og:image:width" property="og:image:width" content="512"><meta data-n-head="ssr" data-hid="og:image:height" property="og:image:height" content="512"><meta data-n-head="ssr" data-hid="og:site_name" property="og:site_name" content="@mazipan"><meta data-n-head="ssr" data-hid="profile:username" property="profile:username" content="mazipanneh"><meta data-n-head="ssr" name="twitter:card" content="summary"><meta data-n-head="ssr" name="twitter:creator" content="@maz_ipan"><meta data-n-head="ssr" name="twitter:site" content="@maz_ipan"><meta data-n-head="ssr" data-hid="description" name="description" content="Menceritakan bagaimana cara membuat AMP Pages untuk blog kalian dengan framework Nuxt.js"><meta data-n-head="ssr" data-hid="apple-mobile-web-app-title" name="apple-mobile-web-app-title" content="Membuat AMP Pages dengan Nuxt.js"><meta data-n-head="ssr" data-hid="og:title" property="og:title" content="Membuat AMP Pages dengan Nuxt.js"><meta data-n-head="ssr" data-hid="og:description" property="og:description" content="Menceritakan bagaimana cara membuat AMP Pages untuk blog kalian dengan framework Nuxt.js"><meta data-n-head="ssr" data-hid="og:url" property="og:url" content="https://www.mazipan.xyz/generate-amp-pages-in-nuxtjs/"><meta data-n-head="ssr" data-hid="twitter:title" name="twitter:title" content="Membuat AMP Pages dengan Nuxt.js"><meta data-n-head="ssr" data-hid="twitter:description" name="twitter:description" content="Menceritakan bagaimana cara membuat AMP Pages untuk blog kalian dengan framework Nuxt.js"><meta data-n-head="ssr" data-hid="twitter:url" name="twitter:url" content="https://www.mazipan.xyz/generate-amp-pages-in-nuxtjs/"><meta data-n-head="ssr" data-hid="og:image" property="og:image" content="https://www.mazipan.xyz/content-images/generate-amp-pages-in-nuxtjs/mazipan-amp.png"><meta data-n-head="ssr" data-hid="og:image:secure_url" property="og:image:secure_url" content="https://www.mazipan.xyz/content-images/generate-amp-pages-in-nuxtjs/mazipan-amp.png"><meta data-n-head="ssr" data-hid="twitter:image:src" name="twitter:image:src" content="https://www.mazipan.xyz/content-images/generate-amp-pages-in-nuxtjs/mazipan-amp.png"><meta data-n-head="ssr" data-hid="og:type" property="og:type" content="article"><meta data-n-head="ssr" data-hid="article:published_time" property="article:published_time" content="2019-10-03T21:10:36.146Z"><meta data-n-head="ssr" data-hid="article:section" property="article:section" content="Technology"><link data-n-head="ssr" rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link data-n-head="ssr" rel="icon" type="image/png" sizes="96x96" href="/favicon-96x96.png"><link data-n-head="ssr" rel="icon" type="image/png" sizes="192x192" href="/favicon-192x192.png"><link data-n-head="ssr" rel="manifest" href="/_nuxt/manifest.2abfda24.json"><link data-n-head="ssr" rel="shortcut icon" href="/_nuxt/icons/icon_64.b338d5.png"><link data-n-head="ssr" rel="apple-touch-icon" href="/_nuxt/icons/icon_512.b338d5.png" sizes="512x512"><link data-n-head="ssr" data-hid="amphtml" rel="amphtml" href="https://www.mazipan.xyz/amp/generate-amp-pages-in-nuxtjs/"><link rel="preload" href="/_nuxt/b774a23ff7f4b117b2d2.js" as="script"><link rel="preload" href="/_nuxt/43ef0f0d7fbc439adaa2.js" as="script"><link rel="preload" href="/_nuxt/429a51c710353b0d2306.js" as="script"><link rel="preload" href="/_nuxt/02dd056a2edd98709ece.js" as="script"><link rel="preload" href="/_nuxt/6e50a0b1cd3dbfd0d5aa.js" as="script"><link rel="preload" href="/_nuxt/f1e329502cedecb59233.js" as="script"><style data-vue-ssr-id="7372a3d1:0 7b3c8e2c:0 4cdb2c52:0 3191d5ad:0 979756bc:0">/*! modern-normalize | MIT License | https://github.com/sindresorhus/modern-normalize */html{-webkit-box-sizing:border-box;box-sizing:border-box}*,::after,::before{-webkit-box-sizing:inherit;box-sizing:inherit}:root{-moz-tab-size:4;-o-tab-size:4;tab-size:4}html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Helvetica,Arial,sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol'}hr{height:0}abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:SFMono-Regular,Consolas,'Liberation Mono',Menlo,Courier,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{padding:0}progress{vertical-align:baseline}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}:root{--bg:#282a36;--bgLighter:#44475a;--textNormal:#f8f8f2;--textTitle:#50fa7b;--textSubtitle:#8be9fd;--textLink:#bd93f9;--textHighlight:#ff79c6;--textWarning:#f1fa8c;--textDanger:#ff5555;--textSecondary:#6272a4}body{font-family:Montserrat,-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-size:16px;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;-webkit-box-sizing:border-box;box-sizing:border-box;color:var(--textNormal);background-color:var(--bg)}.container{margin-left:auto;margin-right:auto;max-width:42rem;padding:2.625rem 1.3125rem}.clearfix::after{content:"";clear:both;display:table}a{color:var(--textLink);text-decoration:none}a:hover{text-decoration:underline}blockquote{font-style:italic;border-left:4px solid var(--textSecondary);color:var(--textSecondary);margin:0;padding:.25em 1em;font-size:110%}small{font-size:80%}table{display:block;overflow:auto;width:100%;border-collapse:collapse;border-spacing:0}table th{border:1px solid #dfe2e5;padding:13px;font-weight:700}table tr td{border:1px solid #c6cbd1;padding:8px 13px;text-align:left}table tr:nth-child(2n){background-color:#3c3e50}:not(pre)>code[class*=language-],pre[class*=language-]{border-radius:10px;-webkit-box-shadow:0 0 8px 4px rgba(0,0,0,.2);box-shadow:0 0 8px 4px rgba(0,0,0,.2);background-color:var(--bgLighter)}code:not([class*=language-]){background-color:var(--bgLighter);color:var(--textLink);padding:.1em .5em;border-radius:.25em}pre{max-width:100%;overflow:auto}.flex{display:-webkit-box;display:-ms-flexbox;display:flex}.flex--center{-webkit-box-align:center;-ms-flex-align:center;align-items:center}.dot{padding:0 .5em}.wrapper{margin:1em 0 0 0;min-height:60vh}.meta{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.meta__date{color:var(--textSubtitle)}@media screen and (max-width:640px){.meta--desktop{display:none}}.meta--mobile{display:none}@media screen and (max-width:640px){.meta--mobile{display:block}}.space-bottom{margin-bottom:1em}.footer{width:100%;margin:0 auto;text-align:center}@-webkit-keyframes zoomIn{from{opacity:0;-webkit-transform:scale3d(.3,.3,.3);transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes zoomIn{from{opacity:0;-webkit-transform:scale3d(.3,.3,.3);transform:scale3d(.3,.3,.3)}50%{opacity:1}}.zoomIn{-webkit-animation-name:zoomIn;animation-name:zoomIn;-webkit-animation-duration:1s;animation-duration:1s;-webkit-animation-fill-mode:both;animation-fill-mode:both}.text-normal{color:var(--textNormal)}.text-title{color:var(--textTitle)}.text-subtitle{color:var(--textSubtitle)}.text-link{color:var(--textLink)}.text-highlight{color:var(--textHighlight)}.text-warning{color:var(--textWarning)}.text-danger{color:var(--textDanger)}.text-secondary{color:var(--textSecondary)}.header{margin-bottom:3.5rem}.header--simplify{margin-bottom:1rem}.profile{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.profile--left{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.profile__img{height:76px;width:76px;margin-right:1em}.profile__text{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;margin-right:1em}.profile__title{font-weight:700;font-size:1.5em;margin-top:0}.profile__social a{margin-right:.5em}.nav{margin-top:1em}.pages__title{margin-bottom:.25em;font-weight:700}.pages__title--small{font-size:2em}.pages__cover{margin:2em 0 0 0;width:100%;height:200px;-o-object-fit:cover;object-fit:cover;border-radius:10px;-webkit-box-shadow:1px 1px 8px 5px rgba(0,0,0,.2);box-shadow:1px 1px 8px 5px rgba(0,0,0,.2)}.pages__content{width:100%;word-break:break-word;margin:2em 0}.pages__date{color:var(--textSubtitle)}.pages__item{margin-bottom:3.5em}.pages__lang{padding:.25em 1em;border-radius:.25em;background-color:var(--bgLighter);margin-bottom:1em;display:table;cursor:pointer}.pages__tags{display:-webkit-box;display:-ms-flexbox;display:flex}.pages__tags--spacetop{margin-top:.5em}.pages__tag{margin-right:.5em;padding:0 .5em;line-height:1.5;border-radius:.25em}.pages__tag a{color:var(--bgLighter)}.pages__tag:first-child{background-color:var(--textHighlight)}.pages__tag:nth-child(2){background-color:var(--textTitle)}.pages__tag:nth-child(3){background-color:var(--textSubtitle)}.pages__sponsored{padding:.25em 1em;border-radius:.25em;background-color:var(--bgLighter)}.pages__footer{margin:1em 0}.block-wrap{margin:1em 0;display:-webkit-box;display:-ms-flexbox;display:flex;justify-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.like,.share{display:-webkit-box;display:-ms-flexbox;display:flex}.like-btn,.share-btn{color:var(--textNormal);background:var(--textLink);padding:.25em 1em;border-radius:.25em;border:0;outline:0;cursor:pointer;margin-right:1em;text-decoration:none;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.pages__content h2{color:var(--textSubtitle)}.pages__content h3{color:var(--textWarning)}.pages__content a{color:var(--textHighlight);text-decoration:underline}.pages__content p{line-height:1.5}.pages__content img{width:90%;height:auto;border-radius:10px;-webkit-box-shadow:1px 1px 8px 5px rgba(0,0,0,.2);box-shadow:1px 1px 8px 5px rgba(0,0,0,.2);-o-object-fit:cover;object-fit:cover}.pages__content ol>li,.pages__content ul{line-height:2}.VueAdsense{max-width:42rem;width:90%;padding-top:2.625rem;display:block}.ion{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex}.ion__svg{fill:currentColor}@-webkit-keyframes ionShake{10%,90%{-webkit-transform:translate3d(-1px,0,0);transform:translate3d(-1px,0,0)}20%,80%{-webkit-transform:translate3d(2px,0,0);transform:translate3d(2px,0,0)}30%,50%,70%{-webkit-transform:translate3d(-4px,0,0);transform:translate3d(-4px,0,0)}40%,60%{-webkit-transform:translate3d(4px,0,0);transform:translate3d(4px,0,0)}}@keyframes ionShake{10%,90%{-webkit-transform:translate3d(-1px,0,0);transform:translate3d(-1px,0,0)}20%,80%{-webkit-transform:translate3d(2px,0,0);transform:translate3d(2px,0,0)}30%,50%,70%{-webkit-transform:translate3d(-4px,0,0);transform:translate3d(-4px,0,0)}40%,60%{-webkit-transform:translate3d(4px,0,0);transform:translate3d(4px,0,0)}}@-webkit-keyframes ionRotate{100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes ionRotate{100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-webkit-keyframes ionBeat{0%{-webkit-transform:scale(.75);transform:scale(.75)}20%{-webkit-transform:scale(1);transform:scale(1)}40%{-webkit-transform:scale(.75);transform:scale(.75)}60%{-webkit-transform:scale(1);transform:scale(1)}80%{-webkit-transform:scale(.75);transform:scale(.75)}100%{-webkit-transform:scale(.75);transform:scale(.75)}}@keyframes ionBeat{0%{-webkit-transform:scale(.75);transform:scale(.75)}20%{-webkit-transform:scale(1);transform:scale(1)}40%{-webkit-transform:scale(.75);transform:scale(.75)}60%{-webkit-transform:scale(1);transform:scale(1)}80%{-webkit-transform:scale(.75);transform:scale(.75)}100%{-webkit-transform:scale(.75);transform:scale(.75)}}.ion-beat{-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite;-webkit-animation-timing-function:linear;animation-timing-function:linear;-webkit-animation-name:ionBeat;animation-name:ionBeat;-webkit-animation-duration:.82s;animation-duration:.82s}.ion-shake{-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite;-webkit-animation-timing-function:linear;animation-timing-function:linear;-webkit-animation-name:ionShake;animation-name:ionShake;-webkit-animation-duration:.82s;animation-duration:.82s}.ion-rotate{-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite;-webkit-animation-timing-function:linear;animation-timing-function:linear;-webkit-animation-name:ionRotate;animation-name:ionRotate;-webkit-animation-duration:2s;animation-duration:2s}.nuxt-progress{position:fixed;top:0;left:0;right:0;height:4px;width:0%;opacity:1;-webkit-transition:width .1s,opacity .4s;transition:width .1s,opacity .4s;background-color:#bd93f9;z-index:999999}.nuxt-progress.nuxt-progress-notransition{-webkit-transition:none;transition:none}.nuxt-progress-failed{background-color:red}.form .control{display:-webkit-box;display:-ms-flexbox;display:flex;margin-top:1em}.form .input{border:0;outline:0;background:#fff;font-size:16px;line-height:18px;height:40px;vertical-align:middle;width:250px;padding:.5em 1em;border-top-left-radius:.25em;border-bottom-left-radius:.25em}.form .btn{height:40px;border:0;outline:0;text-transform:none;font-size:14px;line-height:18px;background:var(--textLink);color:var(--textNormal);width:100px;border-top-right-radius:.25em;border-bottom-right-radius:.25em}</style>
    <link rel="preconnect" href="https://polyfill.io" crossorigin><link rel="dns-prefetch" href="https://polyfill.io">
    <script src="https://polyfill.io/v2/polyfill.min.js?features=IntersectionObserver"></script>
  </head>
  <body>
    <div data-server-rendered="true" id="__nuxt"><!----><div id="__layout"><div data-enable-ads="true" data-ads-client="ca-pub-5442972248172818" data-production-url="https://www.mazipan.xyz" class="container app"><header class="header header--simplify clearfix"><div class="header__block"><div class="header__child"><a href="/" class="nuxt-link-active"><h1 class="h1">
          mazipan.xyz
        </h1></a> <div class="nav--wrapper navigation"><div class="nav">
    😎
    <a href="/about">
      About
    </a> <span class="dot"> • </span>
    ⏰
    <a href="/now">
      Now
    </a></div> <div class="nav">
    📦
    <a href="/archives">
      Archives
    </a> <span class="dot"> • </span>
    😈
    <a href="/ghibahprogrammer">
      Ghibah
    </a></div></div></div></div></header> <section class="postdetail-ID wrapper clearfix"><section class="pages"><h1 class="pages__title pages__title--small text-title">
    Membuat AMP Pages dengan Nuxt.js
  </h1> <div class="pages__lang"><a href="/generate-amp-pages-in-nuxtjs/en?utm_source=lang">
      Switch to 🇬🇧 language
    </a></div> <!----> <div><div class="meta meta--desktop"><small class="meta__date">
      📆 June 2, 2019
    </small> <small class="dot"> • </small> <small class="meta__read">☕️☕️ 20 min read</small> <small class="dot"> • </small> <small>
      ❤️ 0 likes
    </small> <small class="dot"> • </small> <small>
      📓 0 read
    </small></div> <div class="meta meta--mobile"><div><small class="meta__date">
        📆 June 2, 2019
      </small> <small class="dot"> • </small> <small class="meta__read">☕️☕️ 20 min read</small></div> <div style="margin-top:.5em"><small>
        ❤️ 0 likes
      </small> <small class="dot"> • </small> <small>
        📓 0 read
      </small></div></div></div> <div class="pages__tags pages__tags--spacetop"><div class="pages__tag"><a href="/category/javascript?utm_source=home" title="javascript">
        #javascript
      </a></div><div class="pages__tag"><a href="/category/nuxt?utm_source=home" title="nuxt">
        #nuxt
      </a></div><div class="pages__tag"><a href="/category/amp?utm_source=home" title="amp">
        #amp
      </a></div></div> <div class="pages__content"><div class="content-markdown"><h2>Sekilas Mengenai AMP</h2> <p>AMP (Accelerated Mobile Pages - <a href="https://amp.dev">amp.dev ↗️</a>) merupakan inisiatif yang diawali oleh Google dalam membantu para publisher, developer dan para pemilik website agar bisa menyediakan website dengan kecepatan muat yang sangat cepat bahkan mendekati instan untuk device mobile. Untuk mencapai titik muat instan ini tentu tidak didapatkan secara gratis, ini dilakukan dengan peraturan ketat yang diterapkan oleh AMP. Ekstremnya bisa disebut bahwa AMP bahkan tidak memperbolehkan untuk menyisipkan sembarang skrip JavaScript ke dalam halaman website kita, ditambah dengan berbagai aturan ketat lainnya yang bisa menjamin bahwa website dengan dukungan AMP yang valid bisa tetap dimuat dengan kecepatan yang luar biasa cepat.</p> <p>AMP merupakan rekomendasi yang dianjurkan oleh Google langsung karena memiliki prioritas yang baik bagi hasil pencarian Google Search. Dan dengan rampingnya teknologi di dalamnya serta ditambah bantuan <em>cache</em> dari Google membuat AMP menjadi sangat cepat diakses dan sangat baik untuk digunakan sebagai halaman pertama bagi pengunjung yang datang dari hasil Google Search ini.</p> <img src="/images/placeholder-1x1.png" data-src="/content-images/generate-amp-pages-in-nuxtjs/mazipan-amp.png" alt="Mazipan AMP" height="200px" width="200px"> <h2>Dasar-dasar Membuat AMP</h2> <p>Halaman AMP memang menjadi halaman yang terpisah dari halaman aslinya, ini dikarenakan terlalu banyak aturan ketat yang membuat teknologi website pada umumnya akan susah untuk membuat halaman AMP yang valid. Halaman AMP seperti ibarat halaman kopian dari halaman asli yang telah kita buat sebelumnya namun dengan memenuhi berbagai aturan yang telah ditetapkan oleh AMP.</p> <p>Untuk membuat halaman AMP pertama kita, pertama kita perlu menambahkan identifikasi pada tag <code>html</code> bahwa halaman tersebut merupakan versi AMP.</p> <p>Bila sebelumnya kita menulis html seperti berikut:</p> <pre><code class="language-html">&lt;html>
  &lt;head>&lt;/head>
  &lt;body>&lt;/body>
&lt;html>
</code></pre> <p>Maka di AMP kita akan menambahkan emoji ⚡ pada tag <code>html</code> seperti berikut:</p> <pre><code class="language-html">&lt;html ⚡>
  &lt;head>&lt;/head>
  &lt;body>&lt;/body>
&lt;html>
</code></pre> <p>Atau bila kita tidak senang menggunakan emoji bisa menggantinya dengan atribut <code>amp</code> tanpa perlu mengisi nilai apapun pada atribut tersebut.</p> <p>Setelahnya kita bisa menambahkan skrip utama untuk mendukung AMP dengan menambahkan kode berikut:</p> <pre><code class="language-html">&lt;script async src="https://cdn.ampproject.org/v0.js">&lt;/script>
</code></pre> <p>Serta menambahkan CSS wajib atau disebut <em>boilerplate</em> untuk halaman AMP berikut:</p> <pre><code class="language-html">&lt;style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}&lt;/style>&lt;noscript>&lt;style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}&lt;/style>&lt;/noscript>
</code></pre> <p>Perlu diketahui bahwa kita tidak boleh menambahkan skrip JavaScript apapun selain yang sudah dibuatkan oleh AMP sendiri atau biasa dikenal dengan komponen AMP, jadi kita diharuskan untuk menghapus semua link untuk memuat berbagai JavaScript.</p> <p>Pun dengan CSS, tidak diperbolehkan bagi kita untuk memuat eksternal CSS sehingga harus menghapus semua link yang memuat CSS dari luar. Bila kita membutuhkan CSS tambahan, kita bisa menggunakan internal CSS dengan tag <code>style</code> dengan atribut wajib yakni <code>amp-custom</code> seperti contoh berikut:</p> <pre><code class="language-html">&lt;style amp-custom>
  .custom-class {}
&lt;/style>
</code></pre> <p>Dalam menggunakan CSS pun ada hal yang perlu diperhatikan, seperti tidak bolehnya kita menggunakan <code>!important</code>.</p> <p>Pada dasarnya kita bebas menggunakan berbagai tag HTML pada halaman AMP kita, namun dengan aturan ketat AMP yang meyarankan untuk menggunakan komponen yang telah mereka buat untuk membangun berbagai hal umum, maka ada baiknya bila kita sempatkan untuk membaca halaman dokumen resmi dari AMP mengenai komponen apa saja yang telah disediakan dan bisa kita gunakan pada halaman AMP. Selengkapnya silakan baca di halaman <a href="https://amp.dev/documentation/components/?format=websites">komponen AMP ↗️</a>.</p> <h2>Membuat AMP di Nuxt.js</h2> <p>Awalnya merupakan hal yang sangat sulit untuk membangun halaman AMP yang valid dengan menggunakan framework yang berbasiskan JavaScript, ini dikarenakan AMP sendiri melarang penggunaan JavaScript yang justru pada framework tersebut telah menjadi sebuah tulang punggung dari website kita.</p> <p>Namun dengan perkembangan framework JavaScript akhir-akhir termasuk Nuxt.js di dalamnya, hal yang tadinya tidak terfikirkan untuk dikerjakan menjadi mungkin meskipun masih tergolong rumit tertutama bagi para pengembang web pendatang baru.</p> <p>Untuk blog saya sendiri memang dibangun diatas Nuxt.js yang memanfaatkan kemampuan untuk memproduksi file statis sehingga lebih mudah bagi saya untuk menyajikan website ini. Sayangnya file statis hasil buatan Nuxt.js masih mengandung eksternal JavaScript dan CSS yang sudah kita bahas bahwa hal ini dilarang dalam sebuah halaman AMP. Jadi hal berat yang akan kita kerjakan adalah melakukan pembersihan terhadap halaman AMP yang dihasilkan oleh Nuxt.js ini.</p> <p>Berikut langkah-langkah yang saya kerjakan untuk membuat halaman AMP untuk blog saya:</p> <h3>1. Membuat halaman baru</h3> <p>Karena halaman AMP merupakan kloningan halaman aslinya maka kita perlu membuat halaman baru yang kontennya mendekati konten aslinya. Saya membuat semua halaman AMP berada dibawah satu akar URL yang sama yakni <code>/amp/**</code> agar mudah bagi saya untuk mendeteksi mana halaman asli dan mana halaman AMP.</p> <h3>2. Hapus kode yang tidak diperlukan</h3> <p>Karena di AMP nantinya kita akan menghapus semua penggunaan Javascript, maka kode-kode di bawah <code>methods</code> pada halaman AMP yang mana kebanyakan merupakan fungsi-fungsi yang mendukung interaktitas sebuah halaman website menjadi tidak diperlukan lagi. Dan karena saya juga tidak suka memelihara kode yang tidak diperlukan lagi, maka menghapus adalah pilihan terbaik yang bisa dikerjakan.</p> <h3>3. Menambahkan hook saat generate</h3> <p>Saya memanfaatkan fungsi <code>generate</code> milik Nuxt untuk memproduksi file statis blog saya, karenanya saya perlu menambahkan hook pada saat Nuxt melakukan proses ini agar hasilnya bisa saya manipulasi nantinya.</p> <p>Untuk melakukan hal diatas saya perlu menambahkan kode berikut di berkas <code>nuxt.config.js</code>:</p> <pre><code class="language-javascript">module.exports = {
  hooks: {
    'generate:page': (page) => {
      if (/^\/amp/gi.test(page.route)) {
        console.log('processing amp file: ', page.route)
      }
    }
  },
}
</code></pre> <p>Kode diatas membuat kita bisa menyelipkan sebuah proses ketika Nuxt melakukan proses <code>generate</code> dan saya menambahkan sebuah <em>RegEx</em> untuk mendeteksi hanya halaman AMP saja yang akan diselipkan proses tambahan sementara untuk halaman normal kita tidak memerlukan.</p> <h3>4. Memanipulasi HTML</h3> <p>Dari kode pada bagian sebelumnya kita mendapatkan objek <code>page</code> yang bila kita ambil property <code>page.html</code> adalah merupakan string HTML yang nantinya akan dijadikan file HTML sebagai keluaran akhir.</p> <p>Syukurnya saya menemukan artikel dari <a href="https://toor.co/blog/amp-pages-using-nuxt-js/">toor.co ↗️</a> yang dari situ kita bisa temukan dasar dari fungsi yang bisa memanipulasi HTML string agar mendukung AMP.</p> <p>Fungsinya kurang lebih seperti berikut:</p> <pre><code class="language-javascript">const ampScript = '&lt;script async src="https://cdn.ampproject.org/v0.js">&lt;/script>'
const ampBoilerplate = '&lt;style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}&lt;/style>&lt;noscript>&lt;style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}&lt;/style>&lt;/noscript>'

module.exports = (html) => {
  // Add ⚡ to html tag
  html = html.replace(/&lt;html/gi, '&lt;html ⚡')

  // Combine css into single tag
  let styleConcat = ''
  html = html.replace(/&lt;style[^>]*data-vue-ssr[^>]*>(.*?)?&lt;\/style>/gi, (match, sub) => {
    styleConcat += sub
    return ''
  })
  html = html.replace('&lt;/head>', `&lt;style amp-custom>${styleConcat}&lt;/style>&lt;/head>`)

  // Remove preload and prefetch tags
  html = html.replace(/&lt;link[^>]*rel="(?:preload|prefetch)?"[^>]*>/gi, '')

  // Remove amphtml tag
  html = html.replace(/&lt;link[^>]*rel="(?:amphtml)?"[^>]*>/gi, '')

  // Remove data attributes from tags
  html = html.replace(/\s*data-(?:[^=>]*="[^"]*"|[^=>\s]*)/gi, '')

  // Remove JS script tags except for ld+json
  html = html.replace(/&lt;script\b[^&lt;]*(?:(?!&lt;\/script>)&lt;[^&lt;]*)*&lt;\/script>/gi, (match) => {
    return (/application\/ld\+json/gi.test(match)) ? match : ''
  })

  // Replace img tags with amp-img
  html = html.replace(/&lt;img([^>]*)>/gi, (match, sub) => {
    return `&lt;amp-img ${sub} layout=intrinsic>&lt;/amp-img>`
  })

  // Add AMP script before &lt;/head>
  html = html.replace('&lt;/head>', ampScript + ampBoilerplate + '&lt;/head>')

  return html
}
</code></pre> <p>Seperti kalian bisa baca di bagian komentar pada kode diatas, bahwa kode diatas melakukan berbagai proses penggantian karakter (<em>replace</em>) menggunakan <em>RegEx</em> seperti menambahkan emoji ⚡, menggabungkan semua CSS internal ke dalam satu tag <code>&lt;style amp-custom></code>, menghilangkan berbagai JavaScript eksternal, menambahkan skrip utama dan CSS boilerplate AMP serta berbagai hal lainnya.</p> <p>Fungsi ini saya letakan di direktory <code>plugins/ampify.js</code> yang kemudian dipanggil pada hook generate seperti berikut:</p> <pre><code class="language-javascript">const ampify = require('./plugins/ampify')

module.exports = {
  hooks: {
    'generate:page': (page) => {
      if (/^\/amp/gi.test(page.route)) {
        console.log('processing amp file: ', page.route)
        page.html = ampify(page.html)
      }
    }
  },
}
</code></pre> <h3>5. Mengganti semua penggunaan scoped style menjadi un-scoped</h3> <p>Karena saya termasuk cupu untuk bermain dengan <em>RegEx</em> maka mengutak-atik kode yang penuh dengan <em>RegEx</em> seperti diatas menjadi PR tersendiri.</p> <p>Walhasil ketika menyadari bahwa baris kode berikut ini:</p> <pre><code class="language-javascript">// Remove data attributes from tags
html = html.replace(/\s*data-(?:[^=>]*="[^"]*"|[^=>\s]*)/gi, '')
</code></pre> <p>Ternyata mengakibatkan semua kode CSS <em>scoped</em> saya menjadi berantakan, maka pilihan terbaik adalah memindahkan semua <em>scoped</em> CSS kedalam CSS biasa yang bersifat global. Tentu bukan hal yang mudah karena saya sudah terbiasa dimudahkan dengan kemampuan Vue yang bisa membuat <em>scoped</em> CSS dengan sangat mudah. Pilihan menggunakan global CSS berarti memaksa saya kembali menggunakan konvensi CSS yang tetap mengedepankan prinsip <em>scoped</em> ini seperti BEM CSS.</p> <p>Langkah ini tidak perlu teman-teman ikuti bila memang teman-teman bisa melakukan modifikasi <em>RegEx</em> agar bisa melakukan penggantian karakter dengan lebih tepat tanpa menimbulkan efek samping pada CSS.</p> <h3>6. Mengganti semua lazy load gambar</h3> <p>Pada halaman non-AMP, saya memanfaatkan pustaka <a href="https://github.com/mazipan/vue-tiny-lazyload-img">VueTinyLazyloadImg ↗️</a> untuk melakukan lazy load pada setiap gambar yang dimuat. Sayangnya proses ini dikerjakan oleh JavaScript. Pada AMP hal ini tidak diperlukan lagi karena mereka memiliki komponen <code>amp-img</code> yang sudah mendukung lazy load.</p> <p>Dengan menggunakan <code>amp-img</code> maka tag HTML saya untuk gambar menjadi tidak valid karena sebelumnya dengan pustaka yang saya gunakan diatas saya meletakan alamat gambar pada atribut <code>data-src</code> sementara pada atribut <code>src</code> hanya saya letakan gambar placeholder. Pilihan termudah adalah mengganti tag <code>data-src</code> menjadi tag <code>src</code> dan menghapus penempatan gambar placeholder pada atribut <code>src</code>.</p> <p>Proses diatas bisa kita letakkan pada fungsi sebelumnya yang kita gunakan untuk melakukan penggantian karakter pada HTML string. Sebagai catatan bahwa kita perlu meletakan proses ini sebeleum penghilangan berbagai atribut <code>data-**</code> yang ada di dalam fungsi tersebut karena kita akan kehilangan atribut <code>data-src</code> bila dilakukan setelahnya.</p> <p>Sementara untuk saat ini, saya memilih meletakan pada file .vue yang menjadi halaman AMP dimana disini dilakukan proses parsing konten <em>Markdown</em> menggunakan <code>frontmatter-markdown-loader</code>.</p> <p>Fungsi yang saya buat seperti berikut:</p> <pre><code class="language-javascript">function replaceLazyloadImg (str) {
  return str && str.replace(/"src":(?:[^=>][^"]*","data-src"|[^=>"]*)/gi, '"src"')
}
</code></pre> <h3>7. Menambahkan ukuran pada gambar</h3> <p>Ini pekerjaan yang sampai artikel ini dipublikasikan masih belum sempat saya selesaikan. Menambahkan atribut <code>height</code> dan <code>width</code> pada konten Markdown yang menyertakan gambar di dalamnya.</p> <h3>8. Menambahkan canonical</h3> <p>Kita perlu menautkan antara halaman AMP dengan halaman aslinya agar bisa dideteksi oleh Google bahwa halaman AMP tersebut merupakan representasi dari konten yang mana.</p> <p>Caranya adalah dengan menambahkan kode seperti berikut pada head halaman AMP:</p> <pre><code class="language-html">&lt;head>
  &lt;link rel="canonical" href="alamat-halaman-asli">&lt;/link>
&lt;/head>
</code></pre> <p>Dan kode berikut pada halaman aslinya:</p> <pre><code class="language-html">&lt;head>
  &lt;link rel="amphtml" href="alamat-halaman-amp">&lt;/link>
&lt;/head>
</code></pre> <p>Untuk membuat dua kode diatas kita bisa menambahkan pada bagian <code>head()</code> pada file .vue dari halaman kita, seperti contoh berikut pada halaman AMP:</p> <pre><code class="language-javascript">export default {
  head () {
    const url = `${this.productionUrl}/${this.meta.slug}`
    return {
      link: [
        { hid: 'canonical', rel: 'canonical', href: url }
      ]
    }
  }
}
</code></pre> <p>Dan berikut yang saya sematkan pada halaman aslinya:</p> <pre><code class="language-javascript">export default {
  head () {
    const ampUrl = `${this.productionUrl}/amp/${this.meta.slug}`
    return {
      link: [
        { hid: 'amphtml', rel: 'amphtml', href: ampUrl }
      ]
    }
  }
}
</code></pre> <h3>9. Menambahkan Google Analytics</h3> <p>Untuk menambahkan Google Analytics pada halaman AMP memang sedikit berbeda dengan halaman biasa. Secara mudahnya, menambahkan Google Analytics bisa dilakukan dengan menambahkan skrip eksternal berikut:</p> <pre><code class="language-html">&lt;script async custom-element="amp-analytics" src="https://cdn.ampproject.org/v0/amp-analytics-0.1.js">&lt;/script>
</code></pre> <p>Serta menempatkan kode sederhana untuk melacak <em>page view</em> seperti berikut:</p> <pre><code class="language-html">&lt;amp-analytics type='googleanalytics'>
  &lt;script type='application/json'>
    {
      "vars": {
        "account": "UA-12345678-X"
      },
      "triggers": {
        "trackPageview": {
          "on": "visible",
          "request": "pageview"
        }
      }
    }
  &lt;/script>
&lt;/amp-analytics>
</code></pre> <p>Untuk projek kita, kita bisa menyisipkan kode ini pada skrip <code>ampify</code> kita dengan sedikit perubahan seperti berikut:</p> <pre><code class="language-javascript">const ampScript = `&lt;script async src="https://cdn.ampproject.org/v0.js">&lt;/script>
&lt;script async custom-element="amp-analytics" src="https://cdn.ampproject.org/v0/amp-analytics-0.1.js">&lt;/script>`
</code></pre> <p>Kode di atas digunakan untuk menyisipkan skrip analytics yang dibutuhkan. Dan berikutnya kita akan menyisipkan skrip tracking sebelum tag penutup <code>&lt;/body></code>, seperti contoh berikut:</p> <pre><code class="language-javascript">// Add AMP analytics
html = html.replace('&lt;/body>',
`&lt;amp-analytics type='googleanalytics'>
    &lt;script type='application/json'>
      {
        "vars": {
          "account": "UA-12345678-X"
        },
        "triggers": {
          "trackPageview": {
            "on": "visible",
            "request": "pageview"
          }
        }
      }
    &lt;/script>
  &lt;/amp-analytics>
&lt;/body>`)
</code></pre> <h2>Test Validasi Halaman AMP</h2> <p>Setelah proses selesai dan kalian sudah menghasilkan berkas statis yang mendukung AMP, jangan lupa untuk mengecek validasi dari halaman tersebut. Ada beberapa alternatif yang bisa kalian gunakan untuk melakukan test terhadap validasi AMP, diantaranya</p> <ul><li><a href="https://search.google.com/test/amp">https://search.google.com/test/amp</a></li> <li><a href="https://validator.ampproject.org/">https://validator.ampproject.org/</a></li></ul> <p>Untuk hasil test blog saya sendiri kalian bisa lihat di beberapa tautan berikut:</p> <ul><li><a href="https://search.google.com/test/amp?url=https%3A%2F%2Fwww.mazipan.xyz%2Famp">Halaman Beranda</a></li> <li><a href="https://search.google.com/test/amp?url=https%3A%2F%2Fwww.mazipan.xyz%2Famp%2Fabout">Halaman Tentang</a></li> <li><a href="https://search.google.com/test/amp?url=https%3A%2F%2Fwww.mazipan.xyz%2Famp%2Feslint-formatter-html-extended%2F">Halaman Post Tanpa Gambar</a></li> <li><a href="https://search.google.com/test/amp?url=https%3A%2F%2Fwww.mazipan.xyz%2Famp%2Ftasting-reasonml-for-react%2F">Halaman Post Dengan Gambar</a></li></ul> <h2>Repositori hasil belajar</h2> <p><a href="https://github.com/mazipan/blog-2.0">https://github.com/mazipan/blog-2.0 ↗️</a></p> <h3>Demikian artikel kali ini, semoga bermanfaat...</h3></div> <div><a href="/" class="nuxt-link-active">
    🏠 Back to Home
  </a> <span class="dot"> • </span> <a target="_blank" rel="noopener" title="Edit in Github" href="https://github.com/mazipan/blog-2.0/edit/master/contents/published/generate-amp-pages-in-nuxtjs/index.md">
    📝 Edit in Github
  </a></div></div> <hr> <div class="pages__footer">
    🚨Do you like this article? help me to click ❤️ button, share to your followers and subscribe the newsletter.
    <div class="block-wrap"><div class="share"><a title="Share to facebook" href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fwww.mazipan.xyz%2Fgenerate-amp-pages-in-nuxtjs%3Futm_source%3Dsosial-share&title=Membuat%20AMP%20Pages%20dengan%20Nuxt.js&description=Menceritakan%20bagaimana%20cara%20membuat%20AMP%20Pages%20untuk%20blog%20kalian%20dengan%20framework%20Nuxt.js&quote=Menceritakan%20bagaimana%20cara%20membuat%20AMP%20Pages%20untuk%20blog%20kalian%20dengan%20framework%20Nuxt.js" target="_blank" rel="noopener" class="share-btn"><div title="Logo Facebook Icon" name="logo-facebook-icon" class="ion"><svg width="24px" height="24px" viewBox="0 0 512 512" class="ion__svg"><path d="M426.8 64H85.2C73.5 64 64 73.5 64 85.2v341.6c0 11.7 9.5 21.2 21.2 21.2H256V296h-45.9v-56H256v-41.4c0-49.6 34.4-76.6 78.7-76.6 21.2 0 44 1.6 49.3 2.3v51.8h-35.3c-24.1 0-28.7 11.4-28.7 28.2V240h57.4l-7.5 56H320v152h106.8c11.7 0 21.2-9.5 21.2-21.2V85.2c0-11.7-9.5-21.2-21.2-21.2z"></path></svg></div></a> <a title="Share to twitter" href="https://twitter.com/intent/tweet?text=Membuat%20AMP%20Pages%20dengan%20Nuxt.js-Menceritakan%20bagaimana%20cara%20membuat%20AMP%20Pages%20untuk%20blog%20kalian%20dengan%20framework%20Nuxt.js&url=https%3A%2F%2Fwww.mazipan.xyz%2Fgenerate-amp-pages-in-nuxtjs%3Futm_source%3Dsosial-share&via=maz_ipan" target="_blank" rel="noopener" class="share-btn"><div title="Logo Twitter Icon" name="logo-twitter-icon" class="ion"><svg viewBox="0 0 512 512" width="24px" height="24px" class="ion__svg"><path d="M492 109.5c-17.4 7.7-36 12.9-55.6 15.3 20-12 35.4-31 42.6-53.6-18.7 11.1-39.4 19.2-61.5 23.5C399.8 75.8 374.6 64 346.8 64c-53.5 0-96.8 43.4-96.8 96.9 0 7.6.8 15 2.5 22.1-80.5-4-151.9-42.6-199.6-101.3-8.3 14.3-13.1 31-13.1 48.7 0 33.6 17.2 63.3 43.2 80.7-16-.4-31-4.8-44-12.1v1.2c0 47 33.4 86.1 77.7 95-8.1 2.2-16.7 3.4-25.5 3.4-6.2 0-12.3-.6-18.2-1.8 12.3 38.5 48.1 66.5 90.5 67.3-33.1 26-74.9 41.5-120.3 41.5-7.8 0-15.5-.5-23.1-1.4C62.8 432 113.7 448 168.3 448 346.6 448 444 300.3 444 172.2c0-4.2-.1-8.4-.3-12.5C462.6 146 479 129 492 109.5z"></path></svg></div></a> <a title="Discuss on twitter" href="https://mobile.twitter.com/search?q=https%3A%2F%2Fwww.mazipan.xyz%2Fgenerate-amp-pages-in-nuxtjs%3Futm_source%3Dsosial-share" target="_blank" rel="noopener" class="share-btn"><div title="Md Chatboxes Icon" name="md-chatboxes-icon" class="ion"><svg viewBox="0 0 512 512" width="24px" height="24px" class="ion__svg"><path d="M391.553 64H57.607C53.131 64 48 67.745 48 72.159v214.217c0 4.413 5.131 8.624 9.607 8.624H115v88.894L205.128 295h186.425c4.477 0 7.447-4.211 7.447-8.624V72.159c0-4.414-2.971-8.159-7.447-8.159z"></path><path d="M456.396 127H424v166.57c0 15.987-6.915 26.43-25.152 26.43H218.096l-38.905 39h129.688L399 448v-89h57.396c4.478 0 7.604-4.262 7.604-8.682V136.103c0-4.414-3.126-9.103-7.604-9.103z"></path></svg></div></a> <a title="Like this article" class="like-btn"><div title="Md Heart Icon" name="md-heart-icon" class="ion"><svg viewBox="0 0 512 512" width="24px" height="24px" class="ion__svg"><path d="M256 448l-30.164-27.211C118.718 322.442 48 258.61 48 179.095 48 114.221 97.918 64 162.4 64c36.399 0 70.717 16.742 93.6 43.947C278.882 80.742 313.199 64 349.6 64 414.082 64 464 114.221 464 179.095c0 79.516-70.719 143.348-177.836 241.694L256 448z"></path></svg></div>
            0
        </a></div></div></div> <inarticleadsense data-ad-client="ca-pub-5442972248172818" data-ad-slot="7974047383"></inarticleadsense> <script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Home",
      "item": "https://www.mazipan.xyz"
    },
    {
      "@type": "ListItem",
      "position": 2,
      "name": "javascript",
      "item": "https://www.mazipan.xyz/category/javascript"
    },
    {
      "@type": "ListItem",
      "position": 3,
      "name": "Membuat AMP Pages dengan Nuxt.js",
      "item": "https://www.mazipan.xyz/generate-amp-pages-in-nuxtjs"
    }
  ]
}</script> <script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "NewsArticle",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://www.mazipan.xyz/generate-amp-pages-in-nuxtjs"
  },
  "headline": "Membuat AMP Pages dengan Nuxt.js",
  "image": [
    "https://www.mazipan.xyz/content-images/generate-amp-pages-in-nuxtjs/mazipan-amp.png"
  ],
  "datePublished": "2019-06-02T00:00:00.000Z",
  "dateModified": "2019-06-02T00:00:00.000Z",
  "author": {
    "@type": "Person",
    "name": "Irfan Maulana"
  },
  "publisher": {
    "@type": "Organization",
    "name": "mazipan",
    "logo": {
      "@type": "ImageObject",
      "url": "https://www.mazipan.xyz/favicon-192x192.png"
    }
  },
  "description": "Menceritakan bagaimana cara membuat AMP Pages untuk blog kalian dengan framework Nuxt.js"
}</script></section></section> <hr> <div class="clearfix" style="margin-bottom:2em"><div><h3>📧 Get the newsletter</h3> <form name="contact" method="POST" data-netlify="true" action="/success-subscribed" class="form"><input type="hidden" name="form-name" value="contact"> <label for="form-email">Subscribe here to get the latest article by email.</label> <div class="control"><input id="form-email" type="email" name="email" required placeholder="Your email address" class="input"> <button type="submit" class="btn">
        Submit
      </button></div></form></div></div> <footer class="footer clearfix"><span>Copyright © 2019 by</span> <a href="http://github.com/mazipan" title="Github" target="_blank" rel="noopener">Irfan Maulana</a> <br> <br> <div class="profile__social"><a href="https://github.com/mazipan" title="Github" target="_blank" rel="noopener"><svg viewBox="0 0 512 512" width="24px" height="24px" class="ion__svg"><path d="M256 32C132.3 32 32 134.9 32 261.7c0 101.5 64.2 187.5 153.2 217.9 1.4.3 2.6.4 3.8.4 8.3 0 11.5-6.1 11.5-11.4 0-5.5-.2-19.9-.3-39.1-8.4 1.9-15.9 2.7-22.6 2.7-43.1 0-52.9-33.5-52.9-33.5-10.2-26.5-24.9-33.6-24.9-33.6-19.5-13.7-.1-14.1 1.4-14.1h.1c22.5 2 34.3 23.8 34.3 23.8 11.2 19.6 26.2 25.1 39.6 25.1 10.5 0 20-3.4 25.6-6 2-14.8 7.8-24.9 14.2-30.7-49.7-5.8-102-25.5-102-113.5 0-25.1 8.7-45.6 23-61.6-2.3-5.8-10-29.2 2.2-60.8 0 0 1.6-.5 5-.5 8.1 0 26.4 3.1 56.6 24.1 17.9-5.1 37-7.6 56.1-7.7 19 .1 38.2 2.6 56.1 7.7 30.2-21 48.5-24.1 56.6-24.1 3.4 0 5 .5 5 .5 12.2 31.6 4.5 55 2.2 60.8 14.3 16.1 23 36.6 23 61.6 0 88.2-52.4 107.6-102.3 113.3 8 7.1 15.2 21.1 15.2 42.5 0 30.7-.3 55.5-.3 63 0 5.4 3.1 11.5 11.4 11.5 1.2 0 2.6-.1 4-.4C415.9 449.2 480 363.1 480 261.7 480 134.9 379.7 32 256 32z"></path></svg></a> <a href="https://twitter.com/Maz_Ipan" title="Twitter" target="_blank" rel="noopener"><svg viewBox="0 0 512 512" width="24px" height="24px" class="ion__svg"><path d="M492 109.5c-17.4 7.7-36 12.9-55.6 15.3 20-12 35.4-31 42.6-53.6-18.7 11.1-39.4 19.2-61.5 23.5C399.8 75.8 374.6 64 346.8 64c-53.5 0-96.8 43.4-96.8 96.9 0 7.6.8 15 2.5 22.1-80.5-4-151.9-42.6-199.6-101.3-8.3 14.3-13.1 31-13.1 48.7 0 33.6 17.2 63.3 43.2 80.7-16-.4-31-4.8-44-12.1v1.2c0 47 33.4 86.1 77.7 95-8.1 2.2-16.7 3.4-25.5 3.4-6.2 0-12.3-.6-18.2-1.8 12.3 38.5 48.1 66.5 90.5 67.3-33.1 26-74.9 41.5-120.3 41.5-7.8 0-15.5-.5-23.1-1.4C62.8 432 113.7 448 168.3 448 346.6 448 444 300.3 444 172.2c0-4.2-.1-8.4-.3-12.5C462.6 146 479 129 492 109.5z"></path></svg></a> <a href="https://www.facebook.com/mazipanneh" title="Facebook" target="_blank" rel="noopener"><svg width="24px" height="24px" viewBox="0 0 512 512" class="ion__svg"><path d="M426.8 64H85.2C73.5 64 64 73.5 64 85.2v341.6c0 11.7 9.5 21.2 21.2 21.2H256V296h-45.9v-56H256v-41.4c0-49.6 34.4-76.6 78.7-76.6 21.2 0 44 1.6 49.3 2.3v51.8h-35.3c-24.1 0-28.7 11.4-28.7 28.2V240h57.4l-7.5 56H320v152h106.8c11.7 0 21.2-9.5 21.2-21.2V85.2c0-11.7-9.5-21.2-21.2-21.2z"></path></svg></a></div></footer></div></div></div><script>window.__NUXT__={layout:"default",data:[{lang:"ID",meta:{title:"Membuat AMP Pages dengan Nuxt.js",slug:"generate-amp-pages-in-nuxtjs",date:"2019-06-02",minute2read:20,description:"Menceritakan bagaimana cara membuat AMP Pages untuk blog kalian dengan framework Nuxt.js",categories:["javascript","nuxt","amp"],cover:"https://www.mazipan.xyz/content-images/generate-amp-pages-in-nuxtjs/mazipan-amp.png",_meta:{resourcePath:"/home/travis/build/mazipan/blog-2.0/contents/published/generate-amp-pages-in-nuxtjs/index.md"}},renderFn:'return function render() { var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(\'div\',{staticClass:"content-markdown"},[_c(\'h2\',[_vm._v("Sekilas Mengenai AMP")]),_vm._v(" "),_vm._m(0),_vm._v(" "),_vm._m(1),_vm._v(" "),_c(\'img\',{directives:[{name:"lazyload",rawName:"v-lazyload"}],attrs:{"src":"/images/placeholder-1x1.png","data-src":"/content-images/generate-amp-pages-in-nuxtjs/mazipan-amp.png","alt":"Mazipan AMP","height":"200px","width":"200px"}}),_vm._v(" "),_c(\'h2\',[_vm._v("Dasar-dasar Membuat AMP")]),_vm._v(" "),_c(\'p\',[_vm._v("Halaman AMP memang menjadi halaman yang terpisah dari halaman aslinya, ini dikarenakan terlalu banyak aturan ketat yang membuat teknologi website pada umumnya akan susah untuk membuat halaman AMP yang valid. Halaman AMP seperti ibarat halaman kopian dari halaman asli yang telah kita buat sebelumnya namun dengan memenuhi berbagai aturan yang telah ditetapkan oleh AMP.")]),_vm._v(" "),_vm._m(2),_vm._v(" "),_c(\'p\',[_vm._v("Bila sebelumnya kita menulis html seperti berikut:")]),_vm._v(" "),_vm._m(3),_vm._v(" "),_vm._m(4),_vm._v(" "),_vm._m(5),_vm._v(" "),_vm._m(6),_vm._v(" "),_c(\'p\',[_vm._v("Setelahnya kita bisa menambahkan skrip utama untuk mendukung AMP dengan menambahkan kode berikut:")]),_vm._v(" "),_vm._m(7),_vm._v(" "),_vm._m(8),_vm._v(" "),_vm._m(9),_vm._v(" "),_c(\'p\',[_vm._v("Perlu diketahui bahwa kita tidak boleh menambahkan skrip JavaScript apapun selain yang sudah dibuatkan oleh AMP sendiri atau biasa dikenal dengan komponen AMP, jadi kita diharuskan untuk menghapus semua link untuk memuat berbagai JavaScript.")]),_vm._v(" "),_vm._m(10),_vm._v(" "),_vm._m(11),_vm._v(" "),_vm._m(12),_vm._v(" "),_vm._m(13),_vm._v(" "),_c(\'h2\',[_vm._v("Membuat AMP di Nuxt.js")]),_vm._v(" "),_c(\'p\',[_vm._v("Awalnya merupakan hal yang sangat sulit untuk membangun halaman AMP yang valid dengan menggunakan framework yang berbasiskan JavaScript, ini dikarenakan AMP sendiri melarang penggunaan JavaScript yang justru pada framework tersebut telah menjadi sebuah tulang punggung dari website kita.")]),_vm._v(" "),_c(\'p\',[_vm._v("Namun dengan perkembangan framework JavaScript akhir-akhir termasuk Nuxt.js di dalamnya, hal yang tadinya tidak terfikirkan untuk dikerjakan menjadi mungkin meskipun masih tergolong rumit tertutama bagi para pengembang web pendatang baru.")]),_vm._v(" "),_c(\'p\',[_vm._v("Untuk blog saya sendiri memang dibangun diatas Nuxt.js yang memanfaatkan kemampuan untuk memproduksi file statis sehingga lebih mudah bagi saya untuk menyajikan website ini. Sayangnya file statis hasil buatan Nuxt.js masih mengandung eksternal JavaScript dan CSS yang sudah kita bahas bahwa hal ini dilarang dalam sebuah halaman AMP. Jadi hal berat yang akan kita kerjakan adalah melakukan pembersihan terhadap halaman AMP yang dihasilkan oleh Nuxt.js ini.")]),_vm._v(" "),_c(\'p\',[_vm._v("Berikut langkah-langkah yang saya kerjakan untuk membuat halaman AMP untuk blog saya:")]),_vm._v(" "),_c(\'h3\',[_vm._v("1. Membuat halaman baru")]),_vm._v(" "),_vm._m(14),_vm._v(" "),_c(\'h3\',[_vm._v("2. Hapus kode yang tidak diperlukan")]),_vm._v(" "),_vm._m(15),_vm._v(" "),_c(\'h3\',[_vm._v("3. Menambahkan hook saat generate")]),_vm._v(" "),_vm._m(16),_vm._v(" "),_vm._m(17),_vm._v(" "),_vm._m(18),_vm._v(" "),_vm._m(19),_vm._v(" "),_c(\'h3\',[_vm._v("4. Memanipulasi HTML")]),_vm._v(" "),_vm._m(20),_vm._v(" "),_vm._m(21),_vm._v(" "),_c(\'p\',[_vm._v("Fungsinya kurang lebih seperti berikut:")]),_vm._v(" "),_vm._m(22),_vm._v(" "),_vm._m(23),_vm._v(" "),_vm._m(24),_vm._v(" "),_vm._m(25),_vm._v(" "),_c(\'h3\',[_vm._v("5. Mengganti semua penggunaan scoped style menjadi un-scoped")]),_vm._v(" "),_vm._m(26),_vm._v(" "),_c(\'p\',[_vm._v("Walhasil ketika menyadari bahwa baris kode berikut ini:")]),_vm._v(" "),_vm._m(27),_vm._v(" "),_vm._m(28),_vm._v(" "),_vm._m(29),_vm._v(" "),_c(\'h3\',[_vm._v("6. Mengganti semua lazy load gambar")]),_vm._v(" "),_vm._m(30),_vm._v(" "),_vm._m(31),_vm._v(" "),_vm._m(32),_vm._v(" "),_vm._m(33),_vm._v(" "),_c(\'p\',[_vm._v("Fungsi yang saya buat seperti berikut:")]),_vm._v(" "),_vm._m(34),_vm._v(" "),_c(\'h3\',[_vm._v("7. Menambahkan ukuran pada gambar")]),_vm._v(" "),_vm._m(35),_vm._v(" "),_c(\'h3\',[_vm._v("8. Menambahkan canonical")]),_vm._v(" "),_c(\'p\',[_vm._v("Kita perlu menautkan antara halaman AMP dengan halaman aslinya agar bisa dideteksi oleh Google bahwa halaman AMP tersebut merupakan representasi dari konten yang mana.")]),_vm._v(" "),_c(\'p\',[_vm._v("Caranya adalah dengan menambahkan kode seperti berikut pada head halaman AMP:")]),_vm._v(" "),_vm._m(36),_vm._v(" "),_c(\'p\',[_vm._v("Dan kode berikut pada halaman aslinya:")]),_vm._v(" "),_vm._m(37),_vm._v(" "),_vm._m(38),_vm._v(" "),_vm._m(39),_vm._v(" "),_c(\'p\',[_vm._v("Dan berikut yang saya sematkan pada halaman aslinya:")]),_vm._v(" "),_vm._m(40),_vm._v(" "),_c(\'h3\',[_vm._v("9. Menambahkan Google Analytics")]),_vm._v(" "),_c(\'p\',[_vm._v("Untuk menambahkan Google Analytics pada halaman AMP memang sedikit berbeda dengan halaman biasa. Secara mudahnya, menambahkan Google Analytics bisa dilakukan dengan menambahkan skrip eksternal berikut:")]),_vm._v(" "),_vm._m(41),_vm._v(" "),_vm._m(42),_vm._v(" "),_vm._m(43),_vm._v(" "),_vm._m(44),_vm._v(" "),_vm._m(45),_vm._v(" "),_vm._m(46),_vm._v(" "),_vm._m(47),_vm._v(" "),_c(\'h2\',[_vm._v("Test Validasi Halaman AMP")]),_vm._v(" "),_c(\'p\',[_vm._v("Setelah proses selesai dan kalian sudah menghasilkan berkas statis yang mendukung AMP, jangan lupa untuk mengecek validasi dari halaman tersebut. Ada beberapa alternatif yang bisa kalian gunakan untuk melakukan test terhadap validasi AMP, diantaranya")]),_vm._v(" "),_vm._m(48),_vm._v(" "),_c(\'p\',[_vm._v("Untuk hasil test blog saya sendiri kalian bisa lihat di beberapa tautan berikut:")]),_vm._v(" "),_vm._m(49),_vm._v(" "),_c(\'h2\',[_vm._v("Repositori hasil belajar")]),_vm._v(" "),_vm._m(50),_vm._v(" "),_c(\'h3\',[_vm._v("Demikian artikel kali ini, semoga bermanfaat...")])]) }',staticRenderFn:'return [function () { var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(\'p\',[_vm._v("AMP (Accelerated Mobile Pages - "),_c(\'a\',{attrs:{"href":"https://amp.dev"}},[_vm._v("amp.dev ↗️")]),_vm._v(") merupakan inisiatif yang diawali oleh Google dalam membantu para publisher, developer dan para pemilik website agar bisa menyediakan website dengan kecepatan muat yang sangat cepat bahkan mendekati instan untuk device mobile. Untuk mencapai titik muat instan ini tentu tidak didapatkan secara gratis, ini dilakukan dengan peraturan ketat yang diterapkan oleh AMP. Ekstremnya bisa disebut bahwa AMP bahkan tidak memperbolehkan untuk menyisipkan sembarang skrip JavaScript ke dalam halaman website kita, ditambah dengan berbagai aturan ketat lainnya yang bisa menjamin bahwa website dengan dukungan AMP yang valid bisa tetap dimuat dengan kecepatan yang luar biasa cepat.")]) },function () { var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(\'p\',[_vm._v("AMP merupakan rekomendasi yang dianjurkan oleh Google langsung karena memiliki prioritas yang baik bagi hasil pencarian Google Search. Dan dengan rampingnya teknologi di dalamnya serta ditambah bantuan "),_c(\'em\',[_vm._v("cache")]),_vm._v(" dari Google membuat AMP menjadi sangat cepat diakses dan sangat baik untuk digunakan sebagai halaman pertama bagi pengunjung yang datang dari hasil Google Search ini.")]) },function () { var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(\'p\',[_vm._v("Untuk membuat halaman AMP pertama kita, pertama kita perlu menambahkan identifikasi pada tag "),_c(\'code\',{pre:true},[_vm._v("html")]),_vm._v(" bahwa halaman tersebut merupakan versi AMP.")]) },function () { var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(\'pre\',[_c(\'code\',{pre:true,attrs:{"class":"language-html"}},[_vm._v("<html>\\n  <head></head>\\n  <body></body>\\n<html>\\n")])]) },function () { var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(\'p\',[_vm._v("Maka di AMP kita akan menambahkan emoji ⚡ pada tag "),_c(\'code\',{pre:true},[_vm._v("html")]),_vm._v(" seperti berikut:")]) },function () { var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(\'pre\',[_c(\'code\',{pre:true,attrs:{"class":"language-html"}},[_vm._v("<html ⚡>\\n  <head></head>\\n  <body></body>\\n<html>\\n")])]) },function () { var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(\'p\',[_vm._v("Atau bila kita tidak senang menggunakan emoji bisa menggantinya dengan atribut "),_c(\'code\',{pre:true},[_vm._v("amp")]),_vm._v(" tanpa perlu mengisi nilai apapun pada atribut tersebut.")]) },function () { var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(\'pre\',[_c(\'code\',{pre:true,attrs:{"class":"language-html"}},[_vm._v("<script async src=\\"https://cdn.ampproject.org/v0.js\\"><\/script>\\n")])]) },function () { var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(\'p\',[_vm._v("Serta menambahkan CSS wajib atau disebut "),_c(\'em\',[_vm._v("boilerplate")]),_vm._v(" untuk halaman AMP berikut:")]) },function () { var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(\'pre\',[_c(\'code\',{pre:true,attrs:{"class":"language-html"}},[_vm._v("<style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>\\n")])]) },function () { var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(\'p\',[_vm._v("Pun dengan CSS, tidak diperbolehkan bagi kita untuk memuat eksternal CSS sehingga harus menghapus semua link yang memuat CSS dari luar. Bila kita membutuhkan CSS tambahan, kita bisa menggunakan internal CSS dengan tag "),_c(\'code\',{pre:true},[_vm._v("style")]),_vm._v(" dengan atribut wajib yakni "),_c(\'code\',{pre:true},[_vm._v("amp-custom")]),_vm._v(" seperti contoh berikut:")]) },function () { var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(\'pre\',[_c(\'code\',{pre:true,attrs:{"class":"language-html"}},[_vm._v("<style amp-custom>\\n  .custom-class {}\\n</style>\\n")])]) },function () { var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(\'p\',[_vm._v("Dalam menggunakan CSS pun ada hal yang perlu diperhatikan, seperti tidak bolehnya kita menggunakan "),_c(\'code\',{pre:true},[_vm._v("!important")]),_vm._v(".")]) },function () { var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(\'p\',[_vm._v("Pada dasarnya kita bebas menggunakan berbagai tag HTML pada halaman AMP kita, namun dengan aturan ketat AMP yang meyarankan untuk menggunakan komponen yang telah mereka buat untuk membangun berbagai hal umum, maka ada baiknya bila kita sempatkan untuk membaca halaman dokumen resmi dari AMP mengenai komponen apa saja yang telah disediakan dan bisa kita gunakan pada halaman AMP. Selengkapnya silakan baca di halaman "),_c(\'a\',{attrs:{"href":"https://amp.dev/documentation/components/?format=websites"}},[_vm._v("komponen AMP ↗️")]),_vm._v(".")]) },function () { var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(\'p\',[_vm._v("Karena halaman AMP merupakan kloningan halaman aslinya maka kita perlu membuat halaman baru yang kontennya mendekati konten aslinya. Saya membuat semua halaman AMP berada dibawah satu akar URL yang sama yakni "),_c(\'code\',{pre:true},[_vm._v("/amp/**")]),_vm._v(" agar mudah bagi saya untuk mendeteksi mana halaman asli dan mana halaman AMP.")]) },function () { var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(\'p\',[_vm._v("Karena di AMP nantinya kita akan menghapus semua penggunaan Javascript, maka kode-kode di bawah "),_c(\'code\',{pre:true},[_vm._v("methods")]),_vm._v(" pada halaman AMP yang mana kebanyakan merupakan fungsi-fungsi yang mendukung interaktitas sebuah halaman website menjadi tidak diperlukan lagi. Dan karena saya juga tidak suka memelihara kode yang tidak diperlukan lagi, maka menghapus adalah pilihan terbaik yang bisa dikerjakan.")]) },function () { var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(\'p\',[_vm._v("Saya memanfaatkan fungsi "),_c(\'code\',{pre:true},[_vm._v("generate")]),_vm._v(" milik Nuxt untuk memproduksi file statis blog saya, karenanya saya perlu menambahkan hook pada saat Nuxt melakukan proses ini agar hasilnya bisa saya manipulasi nantinya.")]) },function () { var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(\'p\',[_vm._v("Untuk melakukan hal diatas saya perlu menambahkan kode berikut di berkas "),_c(\'code\',{pre:true},[_vm._v("nuxt.config.js")]),_vm._v(":")]) },function () { var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(\'pre\',[_c(\'code\',{pre:true,attrs:{"class":"language-javascript"}},[_vm._v("module.exports = {\\n  hooks: {\\n    \'generate:page\': (page) => {\\n      if (/^\\\\/amp/gi.test(page.route)) {\\n        console.log(\'processing amp file: \', page.route)\\n      }\\n    }\\n  },\\n}\\n")])]) },function () { var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(\'p\',[_vm._v("Kode diatas membuat kita bisa menyelipkan sebuah proses ketika Nuxt melakukan proses "),_c(\'code\',{pre:true},[_vm._v("generate")]),_vm._v(" dan saya menambahkan sebuah "),_c(\'em\',[_vm._v("RegEx")]),_vm._v(" untuk mendeteksi hanya halaman AMP saja yang akan diselipkan proses tambahan sementara untuk halaman normal kita tidak memerlukan.")]) },function () { var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(\'p\',[_vm._v("Dari kode pada bagian sebelumnya kita mendapatkan objek "),_c(\'code\',{pre:true},[_vm._v("page")]),_vm._v(" yang bila kita ambil property "),_c(\'code\',{pre:true},[_vm._v("page.html")]),_vm._v(" adalah merupakan string HTML yang nantinya akan dijadikan file HTML sebagai keluaran akhir.")]) },function () { var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(\'p\',[_vm._v("Syukurnya saya menemukan artikel dari "),_c(\'a\',{attrs:{"href":"https://toor.co/blog/amp-pages-using-nuxt-js/"}},[_vm._v("toor.co ↗️")]),_vm._v(" yang dari situ kita bisa temukan dasar dari fungsi yang bisa memanipulasi HTML string agar mendukung AMP.")]) },function () { var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(\'pre\',[_c(\'code\',{pre:true,attrs:{"class":"language-javascript"}},[_vm._v("const ampScript = \'<script async src=\\"https://cdn.ampproject.org/v0.js\\"><\/script>\'\\nconst ampBoilerplate = \'<style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>\'\\n\\nmodule.exports = (html) => {\\n  // Add ⚡ to html tag\\n  html = html.replace(/<html/gi, \'<html ⚡\')\\n\\n  // Combine css into single tag\\n  let styleConcat = \'\'\\n  html = html.replace(/<style[^>]*data-vue-ssr[^>]*>(.*?)?<\\\\/style>/gi, (match, sub) => {\\n    styleConcat += sub\\n    return \'\'\\n  })\\n  html = html.replace(\'</head>\', `<style amp-custom>${styleConcat}</style></head>`)\\n\\n  // Remove preload and prefetch tags\\n  html = html.replace(/<link[^>]*rel=\\"(?:preload|prefetch)?\\"[^>]*>/gi, \'\')\\n\\n  // Remove amphtml tag\\n  html = html.replace(/<link[^>]*rel=\\"(?:amphtml)?\\"[^>]*>/gi, \'\')\\n\\n  // Remove data attributes from tags\\n  html = html.replace(/\\\\s*data-(?:[^=>]*=\\"[^\\"]*\\"|[^=>\\\\s]*)/gi, \'\')\\n\\n  // Remove JS script tags except for ld+json\\n  html = html.replace(/<script\\\\b[^<]*(?:(?!<\\\\/script>)<[^<]*)*<\\\\/script>/gi, (match) => {\\n    return (/application\\\\/ld\\\\+json/gi.test(match)) ? match : \'\'\\n  })\\n\\n  // Replace img tags with amp-img\\n  html = html.replace(/<img([^>]*)>/gi, (match, sub) => {\\n    return `<amp-img ${sub} layout=intrinsic></amp-img>`\\n  })\\n\\n  // Add AMP script before </head>\\n  html = html.replace(\'</head>\', ampScript + ampBoilerplate + \'</head>\')\\n\\n  return html\\n}\\n")])]) },function () { var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(\'p\',[_vm._v("Seperti kalian bisa baca di bagian komentar pada kode diatas, bahwa kode diatas melakukan berbagai proses penggantian karakter ("),_c(\'em\',[_vm._v("replace")]),_vm._v(") menggunakan "),_c(\'em\',[_vm._v("RegEx")]),_vm._v(" seperti menambahkan emoji ⚡, menggabungkan semua CSS internal ke dalam satu tag "),_c(\'code\',{pre:true},[_vm._v("<style amp-custom>")]),_vm._v(", menghilangkan berbagai JavaScript eksternal, menambahkan skrip utama dan CSS boilerplate AMP serta berbagai hal lainnya.")]) },function () { var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(\'p\',[_vm._v("Fungsi ini saya letakan di direktory "),_c(\'code\',{pre:true},[_vm._v("plugins/ampify.js")]),_vm._v(" yang kemudian dipanggil pada hook generate seperti berikut:")]) },function () { var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(\'pre\',[_c(\'code\',{pre:true,attrs:{"class":"language-javascript"}},[_vm._v("const ampify = require(\'./plugins/ampify\')\\n\\nmodule.exports = {\\n  hooks: {\\n    \'generate:page\': (page) => {\\n      if (/^\\\\/amp/gi.test(page.route)) {\\n        console.log(\'processing amp file: \', page.route)\\n        page.html = ampify(page.html)\\n      }\\n    }\\n  },\\n}\\n")])]) },function () { var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(\'p\',[_vm._v("Karena saya termasuk cupu untuk bermain dengan "),_c(\'em\',[_vm._v("RegEx")]),_vm._v(" maka mengutak-atik kode yang penuh dengan "),_c(\'em\',[_vm._v("RegEx")]),_vm._v(" seperti diatas menjadi PR tersendiri.")]) },function () { var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(\'pre\',[_c(\'code\',{pre:true,attrs:{"class":"language-javascript"}},[_vm._v("// Remove data attributes from tags\\nhtml = html.replace(/\\\\s*data-(?:[^=>]*=\\"[^\\"]*\\"|[^=>\\\\s]*)/gi, \'\')\\n")])]) },function () { var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(\'p\',[_vm._v("Ternyata mengakibatkan semua kode CSS "),_c(\'em\',[_vm._v("scoped")]),_vm._v(" saya menjadi berantakan, maka pilihan terbaik adalah memindahkan semua "),_c(\'em\',[_vm._v("scoped")]),_vm._v(" CSS kedalam CSS biasa yang bersifat global. Tentu bukan hal yang mudah karena saya sudah terbiasa dimudahkan dengan kemampuan Vue yang bisa membuat "),_c(\'em\',[_vm._v("scoped")]),_vm._v(" CSS dengan sangat mudah. Pilihan menggunakan global CSS berarti memaksa saya kembali menggunakan konvensi CSS yang tetap mengedepankan prinsip "),_c(\'em\',[_vm._v("scoped")]),_vm._v(" ini seperti BEM CSS.")]) },function () { var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(\'p\',[_vm._v("Langkah ini tidak perlu teman-teman ikuti bila memang teman-teman bisa melakukan modifikasi "),_c(\'em\',[_vm._v("RegEx")]),_vm._v(" agar bisa melakukan penggantian karakter dengan lebih tepat tanpa menimbulkan efek samping pada CSS.")]) },function () { var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(\'p\',[_vm._v("Pada halaman non-AMP, saya memanfaatkan pustaka "),_c(\'a\',{attrs:{"href":"https://github.com/mazipan/vue-tiny-lazyload-img"}},[_vm._v("VueTinyLazyloadImg ↗️")]),_vm._v(" untuk melakukan lazy load pada setiap gambar yang dimuat. Sayangnya proses ini dikerjakan oleh JavaScript. Pada AMP hal ini tidak diperlukan lagi karena mereka memiliki komponen "),_c(\'code\',{pre:true},[_vm._v("amp-img")]),_vm._v(" yang sudah mendukung lazy load.")]) },function () { var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(\'p\',[_vm._v("Dengan menggunakan "),_c(\'code\',{pre:true},[_vm._v("amp-img")]),_vm._v(" maka tag HTML saya untuk gambar menjadi tidak valid karena sebelumnya dengan pustaka yang saya gunakan diatas saya meletakan alamat gambar pada atribut "),_c(\'code\',{pre:true},[_vm._v("data-src")]),_vm._v(" sementara pada atribut "),_c(\'code\',{pre:true},[_vm._v("src")]),_vm._v(" hanya saya letakan gambar placeholder. Pilihan termudah adalah mengganti tag "),_c(\'code\',{pre:true},[_vm._v("data-src")]),_vm._v(" menjadi tag "),_c(\'code\',{pre:true},[_vm._v("src")]),_vm._v(" dan menghapus penempatan gambar placeholder pada atribut "),_c(\'code\',{pre:true},[_vm._v("src")]),_vm._v(".")]) },function () { var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(\'p\',[_vm._v("Proses diatas bisa kita letakkan pada fungsi sebelumnya yang kita gunakan untuk melakukan penggantian karakter pada HTML string. Sebagai catatan bahwa kita perlu meletakan proses ini sebeleum penghilangan berbagai atribut "),_c(\'code\',{pre:true},[_vm._v("data-**")]),_vm._v(" yang ada di dalam fungsi tersebut karena kita akan kehilangan atribut "),_c(\'code\',{pre:true},[_vm._v("data-src")]),_vm._v(" bila dilakukan setelahnya.")]) },function () { var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(\'p\',[_vm._v("Sementara untuk saat ini, saya memilih meletakan pada file .vue yang menjadi halaman AMP dimana disini dilakukan proses parsing konten "),_c(\'em\',[_vm._v("Markdown")]),_vm._v(" menggunakan "),_c(\'code\',{pre:true},[_vm._v("frontmatter-markdown-loader")]),_vm._v(".")]) },function () { var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(\'pre\',[_c(\'code\',{pre:true,attrs:{"class":"language-javascript"}},[_vm._v("function replaceLazyloadImg (str) {\\n  return str && str.replace(/\\"src\\":(?:[^=>][^\\"]*\\",\\"data-src\\"|[^=>\\"]*)/gi, \'\\"src\\"\')\\n}\\n")])]) },function () { var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(\'p\',[_vm._v("Ini pekerjaan yang sampai artikel ini dipublikasikan masih belum sempat saya selesaikan. Menambahkan atribut "),_c(\'code\',{pre:true},[_vm._v("height")]),_vm._v(" dan "),_c(\'code\',{pre:true},[_vm._v("width")]),_vm._v(" pada konten Markdown yang menyertakan gambar di dalamnya.")]) },function () { var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(\'pre\',[_c(\'code\',{pre:true,attrs:{"class":"language-html"}},[_vm._v("<head>\\n  <link rel=\\"canonical\\" href=\\"alamat-halaman-asli\\"></link>\\n</head>\\n")])]) },function () { var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(\'pre\',[_c(\'code\',{pre:true,attrs:{"class":"language-html"}},[_vm._v("<head>\\n  <link rel=\\"amphtml\\" href=\\"alamat-halaman-amp\\"></link>\\n</head>\\n")])]) },function () { var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(\'p\',[_vm._v("Untuk membuat dua kode diatas kita bisa menambahkan pada bagian "),_c(\'code\',{pre:true},[_vm._v("head()")]),_vm._v(" pada file .vue dari halaman kita, seperti contoh berikut pada halaman AMP:")]) },function () { var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(\'pre\',[_c(\'code\',{pre:true,attrs:{"class":"language-javascript"}},[_vm._v("export default {\\n  head () {\\n    const url = `${this.productionUrl}/${this.meta.slug}`\\n    return {\\n      link: [\\n        { hid: \'canonical\', rel: \'canonical\', href: url }\\n      ]\\n    }\\n  }\\n}\\n")])]) },function () { var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(\'pre\',[_c(\'code\',{pre:true,attrs:{"class":"language-javascript"}},[_vm._v("export default {\\n  head () {\\n    const ampUrl = `${this.productionUrl}/amp/${this.meta.slug}`\\n    return {\\n      link: [\\n        { hid: \'amphtml\', rel: \'amphtml\', href: ampUrl }\\n      ]\\n    }\\n  }\\n}\\n")])]) },function () { var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(\'pre\',[_c(\'code\',{pre:true,attrs:{"class":"language-html"}},[_vm._v("<script async custom-element=\\"amp-analytics\\" src=\\"https://cdn.ampproject.org/v0/amp-analytics-0.1.js\\"><\/script>\\n")])]) },function () { var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(\'p\',[_vm._v("Serta menempatkan kode sederhana untuk melacak "),_c(\'em\',[_vm._v("page view")]),_vm._v(" seperti berikut:")]) },function () { var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(\'pre\',[_c(\'code\',{pre:true,attrs:{"class":"language-html"}},[_vm._v("<amp-analytics type=\'googleanalytics\'>\\n  <script type=\'application/json\'>\\n    {\\n      \\"vars\\": {\\n        \\"account\\": \\"UA-12345678-X\\"\\n      },\\n      \\"triggers\\": {\\n        \\"trackPageview\\": {\\n          \\"on\\": \\"visible\\",\\n          \\"request\\": \\"pageview\\"\\n        }\\n      }\\n    }\\n  <\/script>\\n</amp-analytics>\\n")])]) },function () { var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(\'p\',[_vm._v("Untuk projek kita, kita bisa menyisipkan kode ini pada skrip "),_c(\'code\',{pre:true},[_vm._v("ampify")]),_vm._v(" kita dengan sedikit perubahan seperti berikut:")]) },function () { var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(\'pre\',[_c(\'code\',{pre:true,attrs:{"class":"language-javascript"}},[_vm._v("const ampScript = `<script async src=\\"https://cdn.ampproject.org/v0.js\\"><\/script>\\n<script async custom-element=\\"amp-analytics\\" src=\\"https://cdn.ampproject.org/v0/amp-analytics-0.1.js\\"><\/script>`\\n")])]) },function () { var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(\'p\',[_vm._v("Kode di atas digunakan untuk menyisipkan skrip analytics yang dibutuhkan. Dan berikutnya kita akan menyisipkan skrip tracking sebelum tag penutup "),_c(\'code\',{pre:true},[_vm._v("</body>")]),_vm._v(", seperti contoh berikut:")]) },function () { var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(\'pre\',[_c(\'code\',{pre:true,attrs:{"class":"language-javascript"}},[_vm._v("// Add AMP analytics\\nhtml = html.replace(\'</body>\',\\n`<amp-analytics type=\'googleanalytics\'>\\n    <script type=\'application/json\'>\\n      {\\n        \\"vars\\": {\\n          \\"account\\": \\"UA-12345678-X\\"\\n        },\\n        \\"triggers\\": {\\n          \\"trackPageview\\": {\\n            \\"on\\": \\"visible\\",\\n            \\"request\\": \\"pageview\\"\\n          }\\n        }\\n      }\\n    <\/script>\\n  </amp-analytics>\\n</body>`)\\n")])]) },function () { var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(\'ul\',[_c(\'li\',[_c(\'a\',{attrs:{"href":"https://search.google.com/test/amp"}},[_vm._v("https://search.google.com/test/amp")])]),_vm._v(" "),_c(\'li\',[_c(\'a\',{attrs:{"href":"https://validator.ampproject.org/"}},[_vm._v("https://validator.ampproject.org/")])])]) },function () { var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(\'ul\',[_c(\'li\',[_c(\'a\',{attrs:{"href":"https://search.google.com/test/amp?url=https%3A%2F%2Fwww.mazipan.xyz%2Famp"}},[_vm._v("Halaman Beranda")])]),_vm._v(" "),_c(\'li\',[_c(\'a\',{attrs:{"href":"https://search.google.com/test/amp?url=https%3A%2F%2Fwww.mazipan.xyz%2Famp%2Fabout"}},[_vm._v("Halaman Tentang")])]),_vm._v(" "),_c(\'li\',[_c(\'a\',{attrs:{"href":"https://search.google.com/test/amp?url=https%3A%2F%2Fwww.mazipan.xyz%2Famp%2Feslint-formatter-html-extended%2F"}},[_vm._v("Halaman Post Tanpa Gambar")])]),_vm._v(" "),_c(\'li\',[_c(\'a\',{attrs:{"href":"https://search.google.com/test/amp?url=https%3A%2F%2Fwww.mazipan.xyz%2Famp%2Ftasting-reasonml-for-react%2F"}},[_vm._v("Halaman Post Dengan Gambar")])])]) },function () { var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(\'p\',[_c(\'a\',{attrs:{"href":"https://github.com/mazipan/blog-2.0"}},[_vm._v("https://github.com/mazipan/blog-2.0 ↗️")])]) }]'}],error:null,serverRendered:!0}</script><script src="/_nuxt/b774a23ff7f4b117b2d2.js" defer></script><script src="/_nuxt/6e50a0b1cd3dbfd0d5aa.js" defer></script><script src="/_nuxt/f1e329502cedecb59233.js" defer></script><script src="/_nuxt/43ef0f0d7fbc439adaa2.js" defer></script><script src="/_nuxt/429a51c710353b0d2306.js" defer></script><script src="/_nuxt/02dd056a2edd98709ece.js" defer></script><noscript data-n-head="ssr" data-body="true">This website requires JavaScript.</noscript>
    <script type="application/ld+json">{"@context": "http://schema.org","@type": "WebSite","url": "https://www.mazipan.xyz", "name": "Irfan Maulana", "author": "Irfan Maulana", "image": "https://www.mazipan.xyz/icon.png", "description": "@mazipan | A personal blog by Irfan Maulana", "sameAs": [ "https://www.facebook.com/mazipanneh", "https://instagram.com/maz_ipan", "https://twitter.com/Maz_Ipan", "https://id.linkedin.com/in/mazipan", "https://www.slideshare.net/IrfanMaulana21", "https://github.com/mazipan"]}</script>
  </body>
</html>
